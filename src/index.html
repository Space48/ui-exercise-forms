<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Password Reset Form</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="./styles/app.pcss" />
    <script async src="./scripts/app.ts"></script>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <section>
      <h1 class="text-center">Forgot Your Password?</h1>
      <p class="text-center">Please enter your email address bellow to receive a password reset link.</p>
      <div class="container">
        <div class="form-container">

          <h2 id="response-message"></h2>

          <form id="reset-password-form" action="/customer/account/resetPassword" method="POST">
            <label for="email">Email Address</label>
            <input id="email" class="fontsize-s" name="email" type="email" placeholder="email@emailaddress.com">
            <div class="form-buttons">
              <!-- <input class="btn btn-main fontsize-m" type="submit" value="Reset Password"/> -->
              <button id="submit-btn" class="btn btn-main fontsize-m" type="submit">Reset Password</button>
              <a class="" href="">Go Back</a>
            </div>
          </form>
      
            <label for="toggle-info" class="pointer"><span class="info-label">Are you having trouble resetting your password? â–¼</span>
              <input id="toggle-info" type="checkbox" style="visibility:hidden">
              <div class="info-text">
                <P>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quia voluptatem nulla, explicabo cum quibusdam rem voluptate, voluptas impedit quas consequuntur.</P>
                <P>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quia voluptatem nulla, explicabo cum quibusdam rem voluptate, voluptas impedit quas consequuntur.</P>
                <ol>
                    <li><span class="fontSize-m">Go back to the <a href="">register page</a></span></li>
                    <br>
                    <li><span class="fontSize-m">Register with your email address</span><br>
                      <i>If you already have an account, the form will tell you</i>
                    </li>
                </ol>
                <P>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quia voluptatem nulla, explicabo cum quibusdam rem voluptate, voluptas impedit quas consequuntur.</P>
              </div>
            </label>
            <div>
          </div>
      </div>
    </section>
  </body>
</html>

<script>

  async function handleFormSubmit(event) {
    event.preventDefault();
    email = document.getElementById("email").value;

    try {
      await fetch("/customer/account/resetPassword", {
          method: "POST",
          headers: {
              "Content-Type": "application/json"
          },
          body: JSON.stringify({
            email: email
          })
      })
      .then(response => response.json())
      .then(data => {
        console.log(data);
        document.getElementById("response-message").innerHTML = null;
      });
    } catch (error) {
      console.error(error);
    }
  }

  const passwordForm = document.getElementById("reset-password-form");
  passwordForm.addEventListener("submit", handleFormSubmit);

</script>